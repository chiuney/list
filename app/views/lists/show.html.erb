<% provide(:title, "List") %>

<main class="item-show">
  <div class="item-data">
    <%= render 'shared/back' %>

    <%= render partial: 'shared/flash' %>

    <div class="item-data__item-name">
      <span class="item-data__item_name--form">
      <%= @list.list_name %>
      </span>
    </div>

    <div class="item-data__item-comment">
      <span class="item-data__item-comment--form" >
        <%= @list.list_comment %>
      </span>
    </div>

    <div class="item-data__item-user">
      <% if @list.user.image? %>
        <%= link_to image_tag( @list.user.image.thumb.url, class:"item-data__item-user--image"), user_path(@list.user) %>
      <% else %>
        <%= image_tag 'no-image.png',class:"item-data__item-user--image" %>
      <% end %>
      <%= link_to "#{@list.user.user_name} さん", user_path(@list.user), class:"item-data__item-user--link" %>
    </div>

    <% if user_signed_in? && current_user.id == @list.user_id %>
    <div class="item-data__item-edit">
      <%= link_to "編集", edit_list_path(id: @list.id),     class:"item-data__item-edit--form" %>
      <%= link_to "削除", destroy_lists_path(current_user), class:"item-data__item-edit--form",
                                method: :delete, data: { confirm: '削除しますか？' } %>
    </div>

  <% end %>

  <div class="googlemaps">
    <%= render 'shared/googlemaps' %>
  </div>

  <div class="search_box">
    <%= form_with url:search_path, local: true, method: :get do |f| %>
      <div class="search_box__list-search">
        <%= f.select(:option, options_for_select([["ショップ","3"]]),{}, class:"search_box__list-search--select") %>
        <%= f.text_field :search, class:"search_box__list-search--form", autocomplete: 'off', placeholder: "ショップ検索" %>
      </div>
    <% end %>
  </div>

  <sction class="item-display">
  <div class="item-array">
    <% @list.shops.each do |shops| %>
      <div class="item-array__item-detail">
        <% if shops.photos.present? %>
          <%= link_to image_tag(shops.photos[0], class:"item-array__item-detail--img"), shop_path(shops.id) %>
        <% else %>
          <%= link_to image_tag("no-image.png", class:"item-array__item-detail--img"), shop_path(shops.id) %>
        <% end %>
        <div class="display-text">
          <%= link_to shops.shop_name, shop_path(shops.id) , class:"item-array__item-detail--name" %>
          <%= link_to shop_destroy_list_shops_path(shops.id),
          method: :delete, data: { confirm: '削除しますか？' },class:"item-array__item-detail--delete" do %>
            <i class="far fa-trash-alt"></i>
          <% end %>
        </div>

      </div>
    <% end %>
  </div>


</main>